&GLOBAL
  PROJECT optbas-1
  PROGRAM_NAME OPTIMIZE_BASIS
&END GLOBAL
&OPTIMIZE_BASIS
   BASIS_TEMPLATE_FILE ./BASIS_INPUT
   BASIS_WORK_FILE WORK_BASIS_STRUCTURE
   BASIS_OUTPUT_FILE myout

   ! specify basis set combinations being fitted together
   BASIS_COMBINATIONS 0 0 0 0 0
   BASIS_COMBINATIONS 1 1 1 1 1
   BASIS_COMBINATIONS 2 2 2 2 2

   USE_CONDITION_NUMBER 

   ! specify the weights on the CN for all combinations
   CONDITION_WEIGHT 0.01 ! 0
   CONDITION_WEIGHT 0.01 ! 1
   CONDITION_WEIGHT 0.01 ! 2

   ! specify the weights on the residuums for all combinations
   RESIDUUM_WEIGHT 10  ! 0
   RESIDUUM_WEIGHT 10  ! 1
   RESIDUUM_WEIGHT 10  ! 2

   WRITE_FREQUENCY 100

   &OPTIMIZATION
      MAX_FUN 20000
   &END

   &TRAINING_FILES
      INPUT_FILE_NAME NF3-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME HNO2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME HF-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME H2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME N2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME H2O-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME H2CO-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME CH4-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME CH3CN-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME CH2F2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME C6H5OH-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME C5H5N-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME C4H4N2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME C2H4-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME C2H2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME F2-ref.inp
   &END
   &TRAINING_FILES
      INPUT_FILE_NAME O2-ref.inp
   &END

   ! informations for the basis sets to be fitted. If nothing is specified basis from 
   ! training input will be used
   &FIT_KIND H
     BASIS_SET TZV2PX-MOLOPT-SR-GTH  
     INITIAL_DEGREES_OF_FREEDOM COEFFICIENTS
     SWITCH_CONTRACTION_STATE 1 0 1
     SWITCH_CONTRACTION_STATE 1 0 2
     SWITCH_CONTRACTION_STATE 1 1 1
     &DERIVED_BASIS_SETS ! TZV2P 
        BASIS_SET_NAME TZV2P-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 2 1
     &END
     &DERIVED_BASIS_SETS  ! TZVP
        BASIS_SET_NAME TZVP-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 2 1
        REMOVE_CONTRACTION 1 1 2
     &END
  &END   
  &FIT_KIND C
     BASIS_SET TZV2PX-MOLOPT-SR-GTH  
     INITIAL_DEGREES_OF_FREEDOM COEFFICIENTS
     SWITCH_CONTRACTION_STATE 1 0 1
     SWITCH_CONTRACTION_STATE 1 0 2
     SWITCH_CONTRACTION_STATE 1 1 1
     SWITCH_CONTRACTION_STATE 1 1 2
     SWITCH_CONTRACTION_STATE 1 2 1
     &DERIVED_BASIS_SETS 
        BASIS_SET_NAME TZV2P-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
     &END
     &DERIVED_BASIS_SETS
        BASIS_SET_NAME TZVP-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
	REMOVE_CONTRACTION 1 2 2
     &END
   &END 
  &FIT_KIND N
     BASIS_SET TZV2PX-MOLOPT-SR-GTH  
     INITIAL_DEGREES_OF_FREEDOM COEFFICIENTS
     SWITCH_CONTRACTION_STATE 1 0 1
     SWITCH_CONTRACTION_STATE 1 0 2
     SWITCH_CONTRACTION_STATE 1 1 1
     SWITCH_CONTRACTION_STATE 1 1 2
     SWITCH_CONTRACTION_STATE 1 2 1
     &DERIVED_BASIS_SETS 
        BASIS_SET_NAME TZV2P-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
     &END
     &DERIVED_BASIS_SETS
        BASIS_SET_NAME TZVP-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
	REMOVE_CONTRACTION 1 2 2
     &END
   &END 
  &FIT_KIND O
     BASIS_SET TZV2PX-MOLOPT-SR-GTH  
     INITIAL_DEGREES_OF_FREEDOM COEFFICIENTS
     SWITCH_CONTRACTION_STATE 1 0 1
     SWITCH_CONTRACTION_STATE 1 0 2
     SWITCH_CONTRACTION_STATE 1 1 1
     SWITCH_CONTRACTION_STATE 1 1 2
     SWITCH_CONTRACTION_STATE 1 2 1
     &DERIVED_BASIS_SETS 
        BASIS_SET_NAME TZV2P-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
     &END
     &DERIVED_BASIS_SETS
        BASIS_SET_NAME TZVP-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
	REMOVE_CONTRACTION 1 2 2
     &END
   &END 
  &FIT_KIND F
     BASIS_SET TZV2PX-MOLOPT-SR-GTH  
     INITIAL_DEGREES_OF_FREEDOM COEFFICIENTS
     SWITCH_CONTRACTION_STATE 1 0 1
     SWITCH_CONTRACTION_STATE 1 0 2
     SWITCH_CONTRACTION_STATE 1 1 1
     SWITCH_CONTRACTION_STATE 1 1 2
     SWITCH_CONTRACTION_STATE 1 2 1
     &DERIVED_BASIS_SETS 
        BASIS_SET_NAME TZV2P-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
     &END
     &DERIVED_BASIS_SETS
        BASIS_SET_NAME TZVP-MOLOPT-SR-GTH
        REMOVE_CONTRACTION 1 3 1
	REMOVE_CONTRACTION 1 2 2
     &END
   &END 
&END
